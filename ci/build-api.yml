platform: linux
image_resource:
  type: docker-image
  source:
    repository: golang
    tag: 1.6-wheezy

inputs:
- name: cg-deck-source
outputs:
- name: cg-deck-installed
  path: gopath/src/github.com/18F/cg-deck

run:
  path: sh
  args:
  - -exc
  - |
    export GOPATH=$(pwd)/gopath:$GOPATH
    export PATH=$(pwd)/gopath/bin:$PATH

    cp -R cg-deck-source/. gopath/src/github.com/18F/cg-deck
    cd gopath/src/github.com/18F/cg-deck

    go get github.com/Masterminds/glide
    glide install
    ./codecheck.sh
